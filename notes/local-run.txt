Expect: PWD == repoDir

Full run create & publish image over SSH on Linux target (PowerShell):

ssh azvm -C "rm -vrf repo && mkdir -vm 0755 repo" ; scp -r * azvm:repo/ ; ssh azvm -C "echo -e '\n\n' && cd repo && sudo chmod +x *.sh && sudo ./local-wrapper-image.sh"




Copy (image) scripts and run shellcheck on all image scripts (GIT BASH):

ssh azvm -C "rm -vrf check && mkdir -vm 0755 check" && scp -r *image*.sh azvm:check/ && ssh azvm -C "cd check && shellcheck -a -x *image*.sh"




Full run create image and publish to azure (GIT BASH):

ssh azvm -C "rm -vrf repo && mkdir -vm 0755 repo" && scp -r * azvm:repo/ && ssh azvm -C "echo -e '\n\n' && cd repo && sudo chmod +x *.sh && sudo ./local-wrapper-image.sh"




Full run + flash the image on /dev/sdd once done (GIT BASH):

ssh azvm -C "rm -vrf repo && mkdir -vm 0755 repo" && scp -r * azvm:repo/ && ssh azvm -C "echo -e '\n\n' && cd repo && sudo chmod +x *.sh && sudo ./local-wrapper-image.sh" && echo -e '\n\n' && sleep 10 && echo 'y' | ./flash-image.sh /dev/sdd




Flash /dev/sdd only and prompt (GIT BASH):

./flash-image.sh /dev/sdd
